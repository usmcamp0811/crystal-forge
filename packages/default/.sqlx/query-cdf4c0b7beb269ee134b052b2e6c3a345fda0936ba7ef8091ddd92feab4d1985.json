{
  "db_name": "PostgreSQL",
  "query": "\n        UPDATE derivations \n        SET status_id = $1, scheduled_at = NOW()\n        WHERE derivation_path IS NOT NULL \n        AND attempt_count < 5\n        AND (\n            status_id NOT IN ($2, $3, $4) -- Exclude always-terminal states\n            OR status_id = $4 -- Include build-failed for retry\n        )\n        ",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "Int4",
        "Int4",
        "Int4",
        "Int4"
      ]
    },
    "nullable": []
  },
  "hash": "cdf4c0b7beb269ee134b052b2e6c3a345fda0936ba7ef8091ddd92feab4d1985"
}
